# æ¨¡å—2: åŸºç¡€æ•°æ®/æ•°æ®å­—å…¸ APIæµ‹è¯•è®°å½•

> å…±8ä¸ªAPI | æœ€åæµ‹è¯•ï¼š2026-02-03

---

## APIåˆ—è¡¨

| åºå· | API | è¯´æ˜ | è®¤è¯è¦æ±‚ | çŠ¶æ€ |
|------|-----|------|----------|------|
| 2.1 | GET /api/options/{category} | è·å–ç³»ç»Ÿé€‰é¡¹åˆ—è¡¨ | ğŸ”’ éœ€è®¤è¯ | âœ… |
| 2.2 | GET /api/options/industries | è·å–è¡Œä¸šåˆ†ç±»æ ‘ | ğŸ”’ éœ€è®¤è¯ | âœ… |
| 2.3 | GET /api/options/product-categories | è·å–äº§å“å“ç±»æ ‘ | ğŸ”’ éœ€è®¤è¯ | âœ… |
| 2.4 | GET /api/options/users | è·å–ç”¨æˆ·åˆ—è¡¨ï¼ˆå¯¹æ¥äººï¼‰ | ğŸ”’ éœ€è®¤è¯ | âœ… |
| 2.5 | GET /api/dictionary/categories | è·å–å­—å…¸åˆ†ç±»åˆ—è¡¨ | ğŸ”’ éœ€è®¤è¯ | âœ… |
| 2.6 | POST /api/dictionary/{category} | æ–°å¢å­—å…¸é€‰é¡¹ | ğŸ” éœ€ç®¡ç†å‘˜ | âœ… |
| 2.7 | PUT /api/dictionary/{category}/{id} | æ›´æ–°å­—å…¸é€‰é¡¹ | ğŸ” éœ€ç®¡ç†å‘˜ | âœ… |
| 2.8 | DELETE /api/dictionary/{category}/{id} | åˆ é™¤å­—å…¸é€‰é¡¹ | ğŸ” éœ€ç®¡ç†å‘˜ | âœ… |

---

## é€šç”¨å‰ç½®æ¡ä»¶

æ‰€æœ‰APIéƒ½éœ€è¦å…ˆç™»å½•è·å–Tokenï¼š

```
æ­¥éª¤1: POST /api/auth/login
å…¥å‚: {"username":"admin","password":"admin123"}
å‡ºå‚: {"code":200,"data":{"token":"<TOKEN>","user":{...}}}
æå–: data.token å€¼ç”¨äºåç»­è¯·æ±‚Header
```

---

## 2.1 GET /api/options/{category} - è·å–ç³»ç»Ÿé€‰é¡¹åˆ—è¡¨

### åŸºæœ¬ä¿¡æ¯

| é¡¹ | å€¼ |
|-----|-----|
| è®¤è¯è¦æ±‚ | ğŸ”’ éœ€è®¤è¯ |
| å‰ç½®æ¡ä»¶ | éœ€å…ˆè°ƒç”¨ç™»å½•APIè·å–Token |

### è¯·æ±‚æ ¼å¼

```http
GET /api/options/{category}
Authorization: Bearer <TOKEN>
```

**æ”¯æŒçš„categoryå€¼:**
| category | è¯´æ˜ | é¢„æœŸæ•°é‡ |
|----------|------|----------|
| stage | æ¼æ–—é˜¶æ®µ | 7 |
| district | åŒºåŸŸ | 7 |
| enterprise_type | ä¼ä¸šç±»å‹ | 3 |
| staff_size | äººå‘˜è§„æ¨¡ | 6 |
| revenue | è¥æ”¶è§„æ¨¡ | 5 |
| source | ä¼ä¸šæ¥æº | 4 |
| follow_type | è·Ÿè¿›ç±»å‹ | 4 |
| trade_mode | å¤–è´¸æ¨¡å¼ | 5 |
| certification | äº§å“è®¤è¯ | 10 |
| cross_border_platform | è·¨å¢ƒå¹³å° | 18 |

### æµ‹è¯•ç”¨ä¾‹

| åºå· | æµ‹è¯•åœºæ™¯ | è¯·æ±‚è·¯å¾„ | é¢„æœŸç»“æœ | å®é™…ç»“æœ | çŠ¶æ€ |
|------|----------|----------|----------|----------|------|
| 1 | è·å–æ¼æ–—é˜¶æ®µ | /api/options/stage | >=7æ¡ | 7æ¡ | âœ… |
| 2 | è·å–åŒºåŸŸ | /api/options/district | >=7æ¡ | 7æ¡ | âœ… |
| 3 | è·å–ä¼ä¸šç±»å‹ | /api/options/enterprise_type | >=3æ¡ | 3æ¡ | âœ… |
| 4 | è·å–äººå‘˜è§„æ¨¡ | /api/options/staff_size | >=6æ¡ | 6æ¡ | âœ… |
| 5 | è·å–è¥æ”¶è§„æ¨¡ | /api/options/revenue | >=5æ¡ | 5æ¡ | âœ… |
| 6 | è·å–ä¼ä¸šæ¥æº | /api/options/source | >=4æ¡ | 4æ¡ | âœ… |
| 7 | è·å–è·Ÿè¿›ç±»å‹ | /api/options/follow_type | >=4æ¡ | 4æ¡ | âœ… |
| 8 | è·å–å¤–è´¸æ¨¡å¼ | /api/options/trade_mode | >=5æ¡ | 5æ¡ | âœ… |
| 9 | è·å–äº§å“è®¤è¯ | /api/options/certification | >=10æ¡ | 10æ¡ | âœ… |
| 10 | è·å–è·¨å¢ƒå¹³å° | /api/options/cross_border_platform | >=18æ¡ | 18æ¡ | âœ… |
| 11 | ä¸å­˜åœ¨çš„åˆ†ç±» | /api/options/notexist | ç©ºæ•°ç»„ | ç©ºæ•°ç»„[] | âœ… |
| 12 | ç‰¹æ®Šå­—ç¬¦åˆ†ç±» | /api/options/test<script> | å®‰å…¨å¤„ç† | ç©ºæ•°ç»„ | âœ… |
| 13 | æ— Tokenè®¿é—® | /api/options/stage | 403 | æ‹’ç»è®¿é—® | âœ… |

---

## 2.2 GET /api/options/industries - è·å–è¡Œä¸šåˆ†ç±»æ ‘

### åŸºæœ¬ä¿¡æ¯

| é¡¹ | å€¼ |
|-----|-----|
| è®¤è¯è¦æ±‚ | ğŸ”’ éœ€è®¤è¯ |
| å‰ç½®æ¡ä»¶ | éœ€å…ˆè°ƒç”¨ç™»å½•APIè·å–Token |

### è¯·æ±‚æ ¼å¼

```http
GET /api/options/industries
Authorization: Bearer <TOKEN>
```

### å“åº”æ ¼å¼

```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "id": 1,
      "name": "åˆ¶é€ ä¸š",
      "level": 1,
      "parentId": 0,
      "children": [...]
    }
  ]
}
```

### æµ‹è¯•ç”¨ä¾‹

| åºå· | æµ‹è¯•åœºæ™¯ | é¢„æœŸç»“æœ | å®é™…ç»“æœ | çŠ¶æ€ |
|------|----------|----------|----------|------|
| 1 | æ­£å¸¸è·å– | è¿”å›æ ‘ç»“æ„æ•°ç»„ | 4ä¸ªé¡¶çº§åˆ†ç±» | âœ… |
| 2 | éªŒè¯æ ‘ç»“æ„ | childrenæ­£ç¡®åµŒå¥— | åŒ…å«childrenå­—æ®µ | âœ… |

---

## 2.3 GET /api/options/product-categories - è·å–äº§å“å“ç±»æ ‘

### åŸºæœ¬ä¿¡æ¯

| é¡¹ | å€¼ |
|-----|-----|
| è®¤è¯è¦æ±‚ | ğŸ”’ éœ€è®¤è¯ |
| å‰ç½®æ¡ä»¶ | éœ€å…ˆè°ƒç”¨ç™»å½•APIè·å–Token |

### æµ‹è¯•ç”¨ä¾‹

| åºå· | æµ‹è¯•åœºæ™¯ | é¢„æœŸç»“æœ | å®é™…ç»“æœ | çŠ¶æ€ |
|------|----------|----------|----------|------|
| 1 | æ­£å¸¸è·å– | è¿”å›æ ‘ç»“æ„æ•°ç»„ | 20ä¸ªé¡¶çº§åˆ†ç±» | âœ… |

---

## 2.4 GET /api/options/users - è·å–ç”¨æˆ·åˆ—è¡¨ï¼ˆå¯¹æ¥äººï¼‰

### åŸºæœ¬ä¿¡æ¯

| é¡¹ | å€¼ |
|-----|-----|
| è®¤è¯è¦æ±‚ | ğŸ”’ éœ€è®¤è¯ |
| å‰ç½®æ¡ä»¶ | éœ€å…ˆè°ƒç”¨ç™»å½•APIè·å–Token |

### å“åº”æ ¼å¼

```json
{
  "code": 200,
  "message": "success",
  "data": [
    { "value": 1, "label": "ç³»ç»Ÿç®¡ç†å‘˜" },
    { "value": 2, "label": "å¼ ä¸‰" }
  ]
}
```

### æµ‹è¯•ç”¨ä¾‹

| åºå· | æµ‹è¯•åœºæ™¯ | é¢„æœŸç»“æœ | å®é™…ç»“æœ | çŠ¶æ€ |
|------|----------|----------|----------|------|
| 1 | æ­£å¸¸è·å– | >=1ä¸ªç”¨æˆ· | 3ä¸ªç”¨æˆ· | âœ… |
| 2 | éªŒè¯æ ¼å¼ | valueä¸ºID, labelä¸ºå§“å | æ ¼å¼æ­£ç¡® | âœ… |

---

## 2.5 GET /api/dictionary/categories - è·å–å­—å…¸åˆ†ç±»åˆ—è¡¨

### åŸºæœ¬ä¿¡æ¯

| é¡¹ | å€¼ |
|-----|-----|
| è®¤è¯è¦æ±‚ | ğŸ”’ éœ€è®¤è¯ |
| å‰ç½®æ¡ä»¶ | éœ€å…ˆè°ƒç”¨ç™»å½•APIè·å–Token |

### å“åº”æ ¼å¼

```json
{
  "code": 200,
  "message": "success",
  "data": [
    { "category": "stage", "label": "æ¼æ–—é˜¶æ®µ", "count": 7 },
    { "category": "district", "label": "åŒºåŸŸ", "count": 7 }
  ]
}
```

### æµ‹è¯•ç”¨ä¾‹

| åºå· | æµ‹è¯•åœºæ™¯ | é¢„æœŸç»“æœ | å®é™…ç»“æœ | çŠ¶æ€ |
|------|----------|----------|----------|------|
| 1 | æ­£å¸¸è·å– | è¿”å›åˆ†ç±»åˆ—è¡¨ | 24ä¸ªåˆ†ç±» | âœ… |

---

## 2.6 POST /api/dictionary/{category} - æ–°å¢å­—å…¸é€‰é¡¹

### åŸºæœ¬ä¿¡æ¯

| é¡¹ | å€¼ |
|-----|-----|
| è®¤è¯è¦æ±‚ | ğŸ” éœ€ç®¡ç†å‘˜ |
| å‰ç½®æ¡ä»¶ | éœ€å…ˆè°ƒç”¨ç™»å½•APIè·å–adminç”¨æˆ·Token |

### è¯·æ±‚æ ¼å¼

```http
POST /api/dictionary/{category}
Authorization: Bearer <TOKEN>
Content-Type: application/json

{
  "value": "string (å¿…å¡«, é€‰é¡¹å€¼ï¼Œå”¯ä¸€)",
  "label": "string (å¿…å¡«, æ˜¾ç¤ºåç§°)",
  "color": "string (å¯é€‰, é¢œè‰²å¦‚#ff0000)",
  "sortOrder": "number (å¯é€‰, æ’åºï¼Œé»˜è®¤0)"
}
```

### æµ‹è¯•ç”¨ä¾‹

| åºå· | æµ‹è¯•åœºæ™¯ | è¯·æ±‚å…¥å‚ | é¢„æœŸHTTPçŠ¶æ€ç  | å®é™…ç»“æœ | çŠ¶æ€ |
|------|----------|----------|----------------|----------|------|
| 1 | æ­£å¸¸æ–°å¢ | `{"value":"test_xxx","label":"æµ‹è¯•æ¥æº"}` | 200 | è¿”å›æ–°é€‰é¡¹ | âœ… |
| 2 | valueä¸ºç©º | `{"value":"","label":"æµ‹è¯•"}` | 400 | å‚æ•°æ ¡éªŒå¤±è´¥ | âœ… |
| 3 | labelä¸ºç©º | `{"value":"test","label":""}` | 400 | å‚æ•°æ ¡éªŒå¤±è´¥ | âœ… |
| 4 | é‡å¤value | `{"value":"å·²å­˜åœ¨çš„å€¼","label":"x"}` | 400 | å·²å­˜åœ¨ | âœ… |
| 5 | å¸¦é¢œè‰² | `{"value":"test_color","label":"æµ‹è¯•","color":"#ff0000"}` | 200 | ä¿å­˜é¢œè‰² | âœ… |
| 6 | å¸¦æ’åº | `{"value":"test_sort","label":"æµ‹è¯•","sortOrder":99}` | 200 | ä¿å­˜æ’åº | âœ… |
| 7 | æ— Token | `{"value":"notoken","label":"æµ‹è¯•"}` | 403 | æ‹’ç»è®¿é—® | âœ… |

---

## 2.7 PUT /api/dictionary/{category}/{id} - æ›´æ–°å­—å…¸é€‰é¡¹

### åŸºæœ¬ä¿¡æ¯

| é¡¹ | å€¼ |
|-----|-----|
| è®¤è¯è¦æ±‚ | ğŸ” éœ€ç®¡ç†å‘˜ |
| å‰ç½®æ¡ä»¶ | éœ€å…ˆè°ƒç”¨ç™»å½•APIè·å–adminç”¨æˆ·Token |

### è¯·æ±‚æ ¼å¼

```http
PUT /api/dictionary/{category}/{id}
Authorization: Bearer <TOKEN>
Content-Type: application/json

{
  "label": "string (å¯é€‰, æ–°æ˜¾ç¤ºåç§°)",
  "color": "string (å¯é€‰, æ–°é¢œè‰²)",
  "sortOrder": "number (å¯é€‰, æ–°æ’åº)",
  "isEnabled": "number (å¯é€‰, 0ç¦ç”¨/1å¯ç”¨)"
}
```

### æµ‹è¯•ç”¨ä¾‹

| åºå· | æµ‹è¯•åœºæ™¯ | è¯·æ±‚è·¯å¾„ | è¯·æ±‚å…¥å‚ | é¢„æœŸHTTPçŠ¶æ€ç  | å®é™…ç»“æœ | çŠ¶æ€ |
|------|----------|----------|----------|----------------|----------|------|
| 1 | æ­£å¸¸æ›´æ–°label | /api/dictionary/source/{id} | `{"label":"æ–°åç§°"}` | 200 | æ›´æ–°æˆåŠŸ | âœ… |
| 2 | æ›´æ–°é¢œè‰² | /api/dictionary/source/{id} | `{"color":"#00ff00"}` | 200 | æ›´æ–°æˆåŠŸ | âœ… |
| 3 | ç¦ç”¨é€‰é¡¹ | /api/dictionary/source/{id} | `{"isEnabled":0}` | 200 | ç¦ç”¨æˆåŠŸ | âœ… |
| 4 | IDä¸å­˜åœ¨ | /api/dictionary/source/99999 | `{"label":"x"}` | 404 | é€‰é¡¹ä¸å­˜åœ¨ | âœ… |
| 5 | categoryä¸åŒ¹é… | /api/dictionary/stage/{sourceçš„id} | `{"label":"x"}` | 404 | é€‰é¡¹ä¸å­˜åœ¨ | âœ… |
| 6 | è´Ÿæ•°ID | /api/dictionary/source/-1 | `{"label":"x"}` | 404 | é€‰é¡¹ä¸å­˜åœ¨ | âœ… |
| 7 | æ— Token | /api/dictionary/source/1 | `{"label":"x"}` | 403 | æ‹’ç»è®¿é—® | âœ… |

---

## 2.8 DELETE /api/dictionary/{category}/{id} - åˆ é™¤å­—å…¸é€‰é¡¹

### åŸºæœ¬ä¿¡æ¯

| é¡¹ | å€¼ |
|-----|-----|
| è®¤è¯è¦æ±‚ | ğŸ” éœ€ç®¡ç†å‘˜ |
| å‰ç½®æ¡ä»¶ | éœ€å…ˆè°ƒç”¨ç™»å½•APIè·å–adminç”¨æˆ·Token |

### è¯·æ±‚æ ¼å¼

```http
DELETE /api/dictionary/{category}/{id}
Authorization: Bearer <TOKEN>
```

### æµ‹è¯•ç”¨ä¾‹

| åºå· | æµ‹è¯•åœºæ™¯ | è¯·æ±‚è·¯å¾„ | é¢„æœŸHTTPçŠ¶æ€ç  | å®é™…ç»“æœ | çŠ¶æ€ |
|------|----------|----------|----------------|----------|------|
| 1 | æ­£å¸¸åˆ é™¤ | /api/dictionary/source/{id} | 200 | åˆ é™¤æˆåŠŸ | âœ… |
| 2 | IDä¸å­˜åœ¨ | /api/dictionary/source/99999 | 404 | é€‰é¡¹ä¸å­˜åœ¨ | âœ… |
| 3 | è´Ÿæ•°ID | /api/dictionary/source/-1 | 404 | é€‰é¡¹ä¸å­˜åœ¨ | âœ… |
| 4 | æ— Token | /api/dictionary/source/1 | 403 | æ‹’ç»è®¿é—® | âœ… |

---

## æµ‹è¯•æ±‡æ€»

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| æ€»æµ‹è¯•ç”¨ä¾‹ | 39 |
| å·²æµ‹è¯• | 39 |
| é€šè¿‡ | 39 |
| å¤±è´¥ | 0 |
| é€šè¿‡ç‡ | 100% |

---

*æ–‡æ¡£ç‰ˆæœ¬ï¼šv1.1 | æ›´æ–°æ—¥æœŸï¼š2026-02-03*
