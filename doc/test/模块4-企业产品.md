# æ¨¡å—4: ä¼ä¸šäº§å“ç®¡ç† APIæµ‹è¯•è®°å½•

> å…±4ä¸ªAPI | çŠ¶æ€ï¼šâœ… å·²å®Œæˆ

---

## APIåˆ—è¡¨

| åºå· | API | è¯´æ˜ | è®¤è¯è¦æ±‚ | çŠ¶æ€ |
|------|-----|------|----------|------|
| 4.1 | POST /api/enterprises/:enterpriseId/products | æ·»åŠ ä¼ä¸šäº§å“ | ğŸ”’ éœ€è®¤è¯ | âœ… |
| 4.2 | PUT /api/enterprises/:enterpriseId/products/:productId | æ›´æ–°ä¼ä¸šäº§å“ | ğŸ”’ éœ€è®¤è¯ | âœ… |
| 4.3 | DELETE /api/enterprises/:enterpriseId/products/:productId | åˆ é™¤ä¼ä¸šäº§å“ | ğŸ”’ éœ€è®¤è¯ | âœ… |
| 4.4 | POST/PUT/DELETE /api/enterprises/:enterpriseId/patents | ç®¡ç†ä¼ä¸šä¸“åˆ© | ğŸ”’ éœ€è®¤è¯ | âœ… |

---

## å‰ç½®æ¡ä»¶

æ‰€æœ‰APIéƒ½éœ€è¦å…ˆç™»å½•è·å–Tokenï¼š

```bash
POST /api/auth/login
Content-Type: application/json

{"username":"admin","password":"admin123"}
```

å“åº”ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "token": "eyJhbGciOiJIUzUxMiJ9...",
    "user": {...}
  }
}
```

---

## 4.1 æ·»åŠ ä¼ä¸šäº§å“

### è¯·æ±‚æ ¼å¼

```
POST /api/enterprises/{enterpriseId}/products
Authorization: Bearer {token}
Content-Type: application/json

{
  "name": "æ™ºèƒ½å›­è‰ºå·¥å…·å¥—è£…",
  "categoryId": 1,
  "certificationIds": [1, 2],
  "targetRegionIds": [1, 2],
  "targetCountryIds": ["US", "DE", "JP"],
  "annualSales": "800ä¸‡å…ƒ",
  "localProcurementRatio": "70%",
  "automationLevelId": 1,
  "annualCapacity": "30ä¸‡ä»¶",
  "logisticsPartnerIds": [1, 2]
}
```

### å“åº”æ ¼å¼

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "id": 1,
    "enterpriseId": 14,
    "name": "æ™ºèƒ½å›­è‰ºå·¥å…·å¥—è£…",
    "categoryId": 1,
    "categoryName": "ç”µå­äº§å“",
    "certificationIds": [1, 2],
    "certificationNames": ["CEè®¤è¯", "SGSè®¤è¯"],
    "targetRegionIds": [1, 2],
    "targetRegionNames": ["æ¬§æ´²", "åŒ—ç¾"],
    "targetCountryIds": ["US", "DE", "JP"],
    "annualSales": "800ä¸‡å…ƒ",
    "localProcurementRatio": "70%",
    "automationLevelId": 1,
    "automationLevelName": "é«˜åº¦è‡ªåŠ¨åŒ–",
    "annualCapacity": "30ä¸‡ä»¶",
    "logisticsPartnerIds": [1, 2],
    "logisticsPartnerNames": ["DHL", "é¡ºä¸°"],
    "createdAt": "2026-02-03T14:37:30",
    "updatedAt": "2026-02-03T14:37:30"
  }
}
```

### æµ‹è¯•ç”¨ä¾‹

| æµ‹è¯•åœºæ™¯ | è¯·æ±‚å…¥å‚ | é¢„æœŸå“åº” | å®é™…ç»“æœ | çŠ¶æ€ |
|----------|----------|----------|----------|------|
| æ­£å¸¸æ·»åŠ äº§å“ | name="æ™ºèƒ½å›­è‰ºå·¥å…·å¥—è£…" | 200, è¿”å›äº§å“ä¿¡æ¯ | ç¬¦åˆé¢„æœŸ | âœ… |
| äº§å“åç§°ä¸ºç©º | name="" | 400, äº§å“åç§°ä¸èƒ½ä¸ºç©º | ç¬¦åˆé¢„æœŸ | âœ… |
| ä¼ä¸šä¸å­˜åœ¨ | enterpriseId=99999 | 404, ä¼ä¸šä¸å­˜åœ¨ | ç¬¦åˆé¢„æœŸ | âœ… |
| æ— Tokenè®¿é—® | ä¸å¸¦Authorization | 401, æœªæˆæƒ | ç¬¦åˆé¢„æœŸ | âœ… |

---

## 4.2 æ›´æ–°ä¼ä¸šäº§å“

### è¯·æ±‚æ ¼å¼

```
PUT /api/enterprises/{enterpriseId}/products/{productId}
Authorization: Bearer {token}
Content-Type: application/json

{
  "name": "æ™ºèƒ½å›­è‰ºå·¥å…·å¥—è£…Pro",
  "annualSales": "1200ä¸‡å…ƒ",
  "annualCapacity": "50ä¸‡ä»¶"
}
```

### å“åº”æ ¼å¼

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "id": 1,
    "name": "æ™ºèƒ½å›­è‰ºå·¥å…·å¥—è£…Pro",
    "annualSales": "1200ä¸‡å…ƒ",
    "annualCapacity": "50ä¸‡ä»¶",
    ...
  }
}
```

### æµ‹è¯•ç”¨ä¾‹

| æµ‹è¯•åœºæ™¯ | è¯·æ±‚å…¥å‚ | é¢„æœŸå“åº” | å®é™…ç»“æœ | çŠ¶æ€ |
|----------|----------|----------|----------|------|
| æ­£å¸¸æ›´æ–°äº§å“ | name="Proç‰ˆ" | 200, è¿”å›æ›´æ–°åä¿¡æ¯ | ç¬¦åˆé¢„æœŸ | âœ… |
| äº§å“ä¸å­˜åœ¨ | productId=99999 | 404, äº§å“ä¸å­˜åœ¨ | ç¬¦åˆé¢„æœŸ | âœ… |
| ä¼ä¸šä¸å­˜åœ¨ | enterpriseId=99999 | 404, ä¼ä¸šä¸å­˜åœ¨ | ç¬¦åˆé¢„æœŸ | âœ… |

---

## 4.3 åˆ é™¤ä¼ä¸šäº§å“

### è¯·æ±‚æ ¼å¼

```
DELETE /api/enterprises/{enterpriseId}/products/{productId}
Authorization: Bearer {token}
```

### å“åº”æ ¼å¼

```json
{
  "code": 200,
  "message": "success",
  "data": null
}
```

### æµ‹è¯•ç”¨ä¾‹

| æµ‹è¯•åœºæ™¯ | è¯·æ±‚å…¥å‚ | é¢„æœŸå“åº” | å®é™…ç»“æœ | çŠ¶æ€ |
|----------|----------|----------|----------|------|
| æ­£å¸¸åˆ é™¤äº§å“ | productId=1 | 200, åˆ é™¤æˆåŠŸ | ç¬¦åˆé¢„æœŸ | âœ… |
| äº§å“ä¸å­˜åœ¨ | productId=99999 | 404, äº§å“ä¸å­˜åœ¨ | ç¬¦åˆé¢„æœŸ | âœ… |

---

## 4.4 ä¼ä¸šä¸“åˆ©ç®¡ç†

### 4.4.1 æ·»åŠ ä¸“åˆ©

```
POST /api/enterprises/{enterpriseId}/patents
Authorization: Bearer {token}
Content-Type: application/json

{
  "name": "ç¯ä¿ææ–™åº”ç”¨æŠ€æœ¯",
  "patentNo": "ZL2023XXXXXXXX.X"
}
```

å“åº”ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "id": 1,
    "enterpriseId": 14,
    "name": "ç¯ä¿ææ–™åº”ç”¨æŠ€æœ¯",
    "patentNo": "ZL2023XXXXXXXX.X",
    "createdAt": "2026-02-03T14:37:35"
  }
}
```

### 4.4.2 æ›´æ–°ä¸“åˆ©

```
PUT /api/enterprises/{enterpriseId}/patents/{patentId}
Authorization: Bearer {token}
Content-Type: application/json

{
  "name": "ç¯ä¿ææ–™åº”ç”¨æŠ€æœ¯V2",
  "patentNo": "ZL2024YYYYYYYY.Y"
}
```

### 4.4.3 åˆ é™¤ä¸“åˆ©

```
DELETE /api/enterprises/{enterpriseId}/patents/{patentId}
Authorization: Bearer {token}
```

### æµ‹è¯•ç”¨ä¾‹

| æµ‹è¯•åœºæ™¯ | è¯·æ±‚å…¥å‚ | é¢„æœŸå“åº” | å®é™…ç»“æœ | çŠ¶æ€ |
|----------|----------|----------|----------|------|
| æ­£å¸¸æ·»åŠ ä¸“åˆ© | name="ç¯ä¿æŠ€æœ¯" | 200, è¿”å›ä¸“åˆ©ä¿¡æ¯ | ç¬¦åˆé¢„æœŸ | âœ… |
| ä¸“åˆ©åç§°ä¸ºç©º | name="" | 400, ä¸“åˆ©åç§°ä¸èƒ½ä¸ºç©º | ç¬¦åˆé¢„æœŸ | âœ… |
| æ­£å¸¸æ›´æ–°ä¸“åˆ© | name="V2ç‰ˆ" | 200, è¿”å›æ›´æ–°åä¿¡æ¯ | ç¬¦åˆé¢„æœŸ | âœ… |
| æ­£å¸¸åˆ é™¤ä¸“åˆ© | patentId=1 | 200, åˆ é™¤æˆåŠŸ | ç¬¦åˆé¢„æœŸ | âœ… |
| ä¸“åˆ©ä¸å­˜åœ¨ | patentId=99999 | 404, ä¸“åˆ©ä¸å­˜åœ¨ | ç¬¦åˆé¢„æœŸ | âœ… |

---

## é™„åŠ API: è·å–äº§å“/ä¸“åˆ©åˆ—è¡¨

### è·å–äº§å“åˆ—è¡¨

```
GET /api/enterprises/{enterpriseId}/products
Authorization: Bearer {token}
```

å“åº”ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "id": 1,
      "name": "æ™ºèƒ½å›­è‰ºå·¥å…·å¥—è£…",
      ...
    }
  ]
}
```

### è·å–ä¸“åˆ©åˆ—è¡¨

```
GET /api/enterprises/{enterpriseId}/patents
Authorization: Bearer {token}
```

å“åº”ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "id": 1,
      "name": "ç¯ä¿ææ–™åº”ç”¨æŠ€æœ¯",
      "patentNo": "ZL2023XXXXXXXX.X",
      ...
    }
  ]
}
```

---

## æµ‹è¯•æ€»ç»“

| æµ‹è¯•ç±»å‹ | é€šè¿‡ | å¤±è´¥ | æ€»è®¡ |
|----------|------|------|------|
| æ­£å¸¸æµç¨‹ | 8 | 0 | 8 |
| è¾¹é™…æµ‹è¯• | 6 | 0 | 6 |
| æ€»è®¡ | 14 | 0 | 14 |

**æµ‹è¯•æ—¥æœŸ**: 2026-02-03
**æµ‹è¯•äººå‘˜**: AI Assistant
**æµ‹è¯•ç¯å¢ƒ**: å¼€å‘ç¯å¢ƒ (localhost:8080)

---

*æ–‡æ¡£ç‰ˆæœ¬ï¼šv1.0 | æ›´æ–°æ—¥æœŸï¼š2026-02-03*
