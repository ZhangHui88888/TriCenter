# 常州跨境电商三中心 - 企业信息管理系统技术架构文档

## 1. 文档概述

### 1.1 文档目的
本文档定义企业信息管理系统的技术架构设计，为开发团队提供技术选型、系统设计和开发规范的指导。

### 1.2 系统概述
企业信息管理系统是一套面向常州跨境电商三中心的B端管理系统，用于管理企业信息、跟踪转化漏斗、记录服务跟进，支持数据分析决策。

### 1.3 技术选型总览

| 层级 | 技术选型 | 版本建议 |
|-----|---------|---------|
| 前端框架 | React + TypeScript | React 18.x |
| UI组件库 | Ant Design Pro | 6.x |
| 状态管理 | Zustand / Redux Toolkit | 最新稳定版 |
| 后端框架 | Spring Boot (Java) | 3.2.x |
| ORM框架 | MyBatis-Plus | 3.5.x |
| 数据库 | MySQL | 8.0.x |
| 缓存 | Redis | 7.x |
| 认证授权 | Spring Security + JWT | - |
| API文档 | Swagger / Knife4j | 4.x |
| 构建工具 | Maven | 3.9.x |

---

## 2. 系统架构设计

### 2.1 整体架构图

```
┌─────────────────────────────────────────────────────────────────┐
│                        客户端层 (Client Layer)                    │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐              │
│  │   PC浏览器   │  │  移动端H5   │  │   小程序    │              │
│  └─────────────┘  └─────────────┘  └─────────────┘              │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                        网关层 (Gateway Layer)                     │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │              Nginx (反向代理 + 静态资源 + SSL)            │    │
│  └─────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                       应用层 (Application Layer)                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │                 Spring Boot Application                  │    │
│  │  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐   │    │
│  │  │ 企业管理  │ │ 漏斗分析  │ │ 跟进管理  │ │ 数据统计  │   │    │
│  │  └──────────┘ └──────────┘ └──────────┘ └──────────┘   │    │
│  │  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐   │    │
│  │  │ 用户认证  │ │ 权限管理  │ │ 文件服务  │ │ 导入导出  │   │    │
│  │  └──────────┘ └──────────┘ └──────────┘ └──────────┘   │    │
│  └─────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                        数据层 (Data Layer)                        │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐              │
│  │    MySQL    │  │    Redis    │  │  文件存储   │              │
│  │  (主数据库)  │  │   (缓存)    │  │  (MinIO)   │              │
│  └─────────────┘  └─────────────┘  └─────────────┘              │
└─────────────────────────────────────────────────────────────────┘
```

### 2.2 Java后端适用性分析

**推荐使用Java的理由：**

| 维度 | 说明 |
|-----|------|
| **生态成熟** | Spring Boot生态完善，企业级开发首选，文档丰富 |
| **稳定可靠** | Java在企业级应用中久经考验，稳定性高 |
| **团队能力** | Java开发人员储备充足，招聘维护成本低 |
| **扩展性强** | 支持微服务架构演进，便于后期扩展 |
| **安全性高** | Spring Security提供完善的安全框架 |
| **ORM支持** | MyBatis-Plus简化数据库操作，开发效率高 |

**系统规模评估：**
- 预计用户量：50-200人（内部使用）
- 企业数据量：1000-10000条
- 并发量：低（<100 QPS）

结论：**Java + Spring Boot 完全适合本系统需求**，且为后期扩展预留空间。

---

## 3. 后端架构设计

### 3.1 项目结构

```
tricenter-enterprise/
├── pom.xml
├── src/main/java/com/tricenter/enterprise/
│   ├── TriCenterApplication.java          # 启动类
│   ├── config/                             # 配置类
│   │   ├── SecurityConfig.java
│   │   ├── MybatisPlusConfig.java
│   │   ├── RedisConfig.java
│   │   └── SwaggerConfig.java
│   ├── controller/                         # 控制器层
│   │   ├── EnterpriseController.java
│   │   ├── FollowUpController.java
│   │   ├── FunnelController.java
│   │   ├── StatisticsController.java
│   │   └── SystemController.java
│   ├── service/                            # 服务层
│   │   ├── EnterpriseService.java
│   │   ├── impl/
│   │   │   └── EnterpriseServiceImpl.java
│   ├── mapper/                             # 数据访问层
│   │   ├── EnterpriseMapper.java
│   │   └── xml/
│   │       └── EnterpriseMapper.xml
│   ├── entity/                             # 实体类
│   │   ├── Enterprise.java
│   │   ├── EnterpriseContact.java
│   │   ├── EnterpriseProduct.java
│   │   └── ...
│   ├── dto/                                # 数据传输对象
│   │   ├── request/
│   │   │   └── EnterpriseQueryDTO.java
│   │   └── response/
│   │       └── EnterpriseDetailVO.java
│   ├── common/                             # 公共模块
│   │   ├── result/
│   │   │   └── Result.java
│   │   ├── exception/
│   │   │   └── BusinessException.java
│   │   └── enums/
│   │       └── FunnelStageEnum.java
│   └── util/                               # 工具类
│       ├── ExcelUtil.java
│       └── JwtUtil.java
└── src/main/resources/
    ├── application.yml
    ├── application-dev.yml
    ├── application-prod.yml
    └── mapper/
```

### 3.2 分层架构

```
┌────────────────────────────────────────────┐
│           Controller Layer                  │  接收请求，参数校验，调用Service
├────────────────────────────────────────────┤
│            Service Layer                    │  业务逻辑处理，事务管理
├────────────────────────────────────────────┤
│            Mapper Layer                     │  数据访问，SQL操作
├────────────────────────────────────────────┤
│           Database (MySQL)                  │  数据持久化
└────────────────────────────────────────────┘
```

### 3.3 核心依赖 (pom.xml)

```xml
<parent>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-parent</artifactId>
    <version>3.2.0</version>
</parent>

<dependencies>
    <!-- Spring Boot -->
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-web</artifactId>
    </dependency>
    
    <!-- Spring Security -->
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-security</artifactId>
    </dependency>
    
    <!-- MyBatis-Plus -->
    <dependency>
        <groupId>com.baomidou</groupId>
        <artifactId>mybatis-plus-spring-boot3-starter</artifactId>
        <version>3.5.5</version>
    </dependency>
    
    <!-- MySQL -->
    <dependency>
        <groupId>com.mysql</groupId>
        <artifactId>mysql-connector-j</artifactId>
        <scope>runtime</scope>
    </dependency>
    
    <!-- Redis -->
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-data-redis</artifactId>
    </dependency>
    
    <!-- JWT -->
    <dependency>
        <groupId>io.jsonwebtoken</groupId>
        <artifactId>jjwt-api</artifactId>
        <version>0.12.3</version>
    </dependency>
    
    <!-- Knife4j (Swagger) -->
    <dependency>
        <groupId>com.github.xiaoymin</groupId>
        <artifactId>knife4j-openapi3-jakarta-spring-boot-starter</artifactId>
        <version>4.3.0</version>
    </dependency>
    
    <!-- Excel导入导出 -->
    <dependency>
        <groupId>com.alibaba</groupId>
        <artifactId>easyexcel</artifactId>
        <version>3.3.3</version>
    </dependency>
    
    <!-- Lombok -->
    <dependency>
        <groupId>org.projectlombok</groupId>
        <artifactId>lombok</artifactId>
        <optional>true</optional>
    </dependency>
    
    <!-- Hutool工具包 -->
    <dependency>
        <groupId>cn.hutool</groupId>
        <artifactId>hutool-all</artifactId>
        <version>5.8.25</version>
    </dependency>
</dependencies>
```

---

## 4. 数据库设计

### 4.1 MySQL配置建议

```yaml
# application.yml
spring:
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/tricenter_enterprise?useUnicode=true&characterEncoding=utf-8&useSSL=false&serverTimezone=Asia/Shanghai
    username: root
    password: ${DB_PASSWORD}
    hikari:
      minimum-idle: 5
      maximum-pool-size: 20
      idle-timeout: 30000
      connection-timeout: 30000
      max-lifetime: 1800000
```

### 4.2 数据库初始化脚本

```sql
-- 创建数据库
CREATE DATABASE IF NOT EXISTS tricenter_enterprise 
DEFAULT CHARACTER SET utf8mb4 
COLLATE utf8mb4_unicode_ci;

USE tricenter_enterprise;

-- 企业主表
CREATE TABLE enterprise (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '主键ID',
    enterprise_name VARCHAR(200) NOT NULL COMMENT '企业名称',
    unified_credit_code VARCHAR(18) COMMENT '统一社会信用代码',
    district VARCHAR(50) NOT NULL COMMENT '所属区域',
    address VARCHAR(500) COMMENT '详细地址',
    established_date DATE COMMENT '成立时间',
    enterprise_type VARCHAR(20) NOT NULL COMMENT '企业类型',
    industry VARCHAR(100) NOT NULL COMMENT '所属行业',
    employee_scale VARCHAR(50) COMMENT '员工规模',
    domestic_revenue VARCHAR(50) COMMENT '国内营业额(万元)',
    crossborder_revenue VARCHAR(50) COMMENT '跨境电商营业额(万元)',
    website VARCHAR(200) COMMENT '企业官网',
    online_platform VARCHAR(500) COMMENT '线上平台',
    funnel_stage VARCHAR(20) NOT NULL DEFAULT 'POTENTIAL' COMMENT '漏斗阶段',
    source VARCHAR(100) COMMENT '企业来源',
    remark TEXT COMMENT '备注',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    deleted TINYINT NOT NULL DEFAULT 0 COMMENT '逻辑删除标识',
    UNIQUE KEY uk_credit_code (unified_credit_code),
    INDEX idx_funnel_stage (funnel_stage),
    INDEX idx_district (district),
    INDEX idx_industry (industry)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='企业主表';

-- 联系人表
CREATE TABLE enterprise_contact (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    enterprise_id BIGINT NOT NULL COMMENT '企业ID',
    contact_name VARCHAR(50) NOT NULL COMMENT '联系人姓名',
    contact_phone VARCHAR(20) NOT NULL COMMENT '联系电话',
    contact_position VARCHAR(50) COMMENT '职位',
    department VARCHAR(50) COMMENT '部门',
    is_primary TINYINT NOT NULL DEFAULT 0 COMMENT '是否主要联系人',
    wechat VARCHAR(50) COMMENT '微信号',
    email VARCHAR(100) COMMENT '邮箱',
    remark VARCHAR(500) COMMENT '备注',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_enterprise_id (enterprise_id),
    FOREIGN KEY (enterprise_id) REFERENCES enterprise(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='联系人表';

-- 产品信息表
CREATE TABLE enterprise_product (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    enterprise_id BIGINT NOT NULL COMMENT '企业ID',
    product_name VARCHAR(200) NOT NULL COMMENT '产品名称',
    application_field VARCHAR(200) COMMENT '主要应用领域',
    domestic_market VARCHAR(200) COMMENT '主要销售市场(国内)',
    overseas_market VARCHAR(200) COMMENT '主要销售市场(海外)',
    annual_sales DECIMAL(15,2) COMMENT '年销售额(万元)',
    product_certification VARCHAR(200) COMMENT '产品认证',
    has_own_brand TINYINT COMMENT '是否有自主品牌',
    brand_name VARCHAR(100) COMMENT '品牌名称',
    core_technology VARCHAR(500) COMMENT '核心技术/专利',
    annual_capacity VARCHAR(100) COMMENT '年产能',
    automation_level VARCHAR(20) COMMENT '生产设备自动化程度',
    local_procurement_ratio VARCHAR(50) COMMENT '原材料本地采购比例',
    inventory_mode VARCHAR(50) COMMENT '库存管理模式',
    logistics_partner VARCHAR(200) COMMENT '物流合作方',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_enterprise_id (enterprise_id),
    FOREIGN KEY (enterprise_id) REFERENCES enterprise(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='产品信息表';

-- 跨境电商表
CREATE TABLE enterprise_crossborder (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    enterprise_id BIGINT NOT NULL COMMENT '企业ID',
    has_crossborder TINYINT NOT NULL DEFAULT 0 COMMENT '是否开展跨境电商',
    platform_amazon TINYINT DEFAULT 0 COMMENT '亚马逊',
    platform_alibaba TINYINT DEFAULT 0 COMMENT '阿里国际站',
    platform_tiktok TINYINT DEFAULT 0 COMMENT 'TikTok Shop',
    platform_aliexpress TINYINT DEFAULT 0 COMMENT '速卖通',
    platform_ebay TINYINT DEFAULT 0 COMMENT 'eBay',
    platform_shopify TINYINT DEFAULT 0 COMMENT '独立站',
    platform_temu TINYINT DEFAULT 0 COMMENT 'Temu',
    platform_shein TINYINT DEFAULT 0 COMMENT 'SHEIN',
    platform_other VARCHAR(200) COMMENT '其他平台',
    crossborder_ratio DECIMAL(5,2) COMMENT '跨境业务占比(%)',
    logistics_mode VARCHAR(100) COMMENT '跨境物流模式',
    payment_method VARCHAR(100) COMMENT '支付结算方式',
    target_market VARCHAR(500) COMMENT '目标市场及占比',
    crossborder_team_size VARCHAR(50) COMMENT '跨境电商团队规模',
    has_erp TINYINT DEFAULT 0 COMMENT '是否在用ERP',
    erp_name VARCHAR(100) COMMENT 'ERP系统名称',
    pain_points TEXT COMMENT '跨境业务痛点',
    transformation_willingness VARCHAR(20) COMMENT '跨境转型意愿',
    transformation_investment VARCHAR(20) COMMENT '愿意投入转型程度',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    UNIQUE KEY uk_enterprise_id (enterprise_id),
    FOREIGN KEY (enterprise_id) REFERENCES enterprise(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='跨境电商表';

-- 跟进记录表
CREATE TABLE follow_up_record (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    enterprise_id BIGINT NOT NULL COMMENT '企业ID',
    follow_up_date DATE NOT NULL COMMENT '跟进日期',
    follow_up_person VARCHAR(50) NOT NULL COMMENT '跟进人员',
    follow_up_type VARCHAR(20) COMMENT '跟进方式',
    content TEXT NOT NULL COMMENT '跟进内容',
    overall_status VARCHAR(200) COMMENT '总体状态',
    next_step TEXT COMMENT '下一步计划',
    stage_before VARCHAR(20) COMMENT '跟进前阶段',
    stage_after VARCHAR(20) COMMENT '跟进后阶段',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_enterprise_id (enterprise_id),
    INDEX idx_follow_up_date (follow_up_date),
    FOREIGN KEY (enterprise_id) REFERENCES enterprise(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='跟进记录表';

-- 漏斗阶段日志表
CREATE TABLE funnel_stage_log (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    enterprise_id BIGINT NOT NULL COMMENT '企业ID',
    from_stage VARCHAR(20) COMMENT '原阶段',
    to_stage VARCHAR(20) NOT NULL COMMENT '新阶段',
    change_reason VARCHAR(500) COMMENT '变更原因',
    operator VARCHAR(50) NOT NULL COMMENT '操作人',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_enterprise_id (enterprise_id),
    INDEX idx_created_at (created_at),
    FOREIGN KEY (enterprise_id) REFERENCES enterprise(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='漏斗阶段日志表';

-- 系统用户表
CREATE TABLE sys_user (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(50) NOT NULL COMMENT '用户名',
    password VARCHAR(100) NOT NULL COMMENT '密码(加密)',
    real_name VARCHAR(50) COMMENT '真实姓名',
    phone VARCHAR(20) COMMENT '手机号',
    email VARCHAR(100) COMMENT '邮箱',
    role VARCHAR(20) NOT NULL DEFAULT 'USER' COMMENT '角色',
    status TINYINT NOT NULL DEFAULT 1 COMMENT '状态:0-禁用,1-启用',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    UNIQUE KEY uk_username (username)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='系统用户表';
```

### 4.3 索引优化建议

| 表名 | 索引字段 | 索引类型 | 用途 |
|-----|---------|---------|------|
| enterprise | funnel_stage | 普通索引 | 漏斗阶段筛选 |
| enterprise | district | 普通索引 | 区域筛选 |
| enterprise | industry | 普通索引 | 行业筛选 |
| enterprise | unified_credit_code | 唯一索引 | 企业唯一标识 |
| enterprise_crossborder | platform_* | 普通索引 | 平台筛选（按需添加） |
| follow_up_record | enterprise_id, follow_up_date | 联合索引 | 跟进记录查询 |

---

## 5. API设计规范

### 5.1 RESTful API规范

```
基础路径: /api/v1

企业管理:
GET    /api/v1/enterprises              # 企业列表(分页)
GET    /api/v1/enterprises/{id}         # 企业详情
POST   /api/v1/enterprises              # 新增企业
PUT    /api/v1/enterprises/{id}         # 更新企业
DELETE /api/v1/enterprises/{id}         # 删除企业
POST   /api/v1/enterprises/import       # 批量导入
GET    /api/v1/enterprises/export       # 导出Excel

漏斗阶段:
PUT    /api/v1/enterprises/{id}/stage   # 变更漏斗阶段
GET    /api/v1/funnel/statistics        # 漏斗统计
GET    /api/v1/funnel/conversion        # 转化率分析

跟进记录:
GET    /api/v1/enterprises/{id}/follow-ups    # 跟进记录列表
POST   /api/v1/enterprises/{id}/follow-ups    # 新增跟进记录

统计分析:
GET    /api/v1/statistics/overview      # 概览看板
GET    /api/v1/statistics/district      # 区域分析
GET    /api/v1/statistics/industry      # 行业分析
GET    /api/v1/statistics/platform      # 平台分析
```

### 5.2 统一响应格式

```java
@Data
public class Result<T> {
    private int code;           // 状态码: 200成功, 其他失败
    private String message;     // 提示信息
    private T data;             // 数据
    private long timestamp;     // 时间戳
    
    public static <T> Result<T> success(T data) {
        Result<T> result = new Result<>();
        result.setCode(200);
        result.setMessage("success");
        result.setData(data);
        result.setTimestamp(System.currentTimeMillis());
        return result;
    }
    
    public static <T> Result<T> error(int code, String message) {
        Result<T> result = new Result<>();
        result.setCode(code);
        result.setMessage(message);
        result.setTimestamp(System.currentTimeMillis());
        return result;
    }
}
```

### 5.3 分页请求/响应

```java
// 请求
@Data
public class PageQuery {
    private int page = 1;
    private int size = 10;
    private String sortField;
    private String sortOrder; // asc/desc
}

// 响应
@Data
public class PageResult<T> {
    private List<T> list;
    private long total;
    private int page;
    private int size;
    private int pages;
}
```

---

## 6. 安全设计

### 6.1 认证授权流程

```
┌──────────┐    1.登录请求     ┌──────────┐
│  Client  │ ───────────────▶ │  Server  │
│          │                  │          │
│          │ ◀─────────────── │          │
└──────────┘    2.返回JWT      └──────────┘
     │
     │ 3.携带JWT请求
     ▼
┌──────────┐    4.验证JWT      ┌──────────┐
│  Client  │ ───────────────▶ │  Server  │
│          │                  │          │
│          │ ◀─────────────── │          │
└──────────┘    5.返回数据      └──────────┘
```

### 6.2 权限角色设计

| 角色 | 权限说明 |
|-----|---------|
| ADMIN | 系统管理员，拥有所有权限 |
| MANAGER | 业务主管，可管理所有企业和用户 |
| USER | 普通用户，可管理分配给自己的企业 |

### 6.3 安全配置要点

```java
@Configuration
@EnableWebSecurity
public class SecurityConfig {
    
    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        http
            .csrf(csrf -> csrf.disable())
            .sessionManagement(session -> 
                session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))
            .authorizeHttpRequests(auth -> auth
                .requestMatchers("/api/v1/auth/**").permitAll()
                .requestMatchers("/doc.html", "/swagger-ui/**").permitAll()
                .anyRequest().authenticated())
            .addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class);
        return http.build();
    }
}
```

---

## 7. 部署架构

### 7.1 开发环境

```
本地开发:
- JDK 17+
- MySQL 8.0
- Redis 7.x
- Node.js 18+ (前端)
- IDE: IntelliJ IDEA
```

### 7.2 生产环境部署

```
推荐配置 (单机部署):
┌─────────────────────────────────────────────────┐
│                  云服务器 (4C8G)                  │
│  ┌───────────────────────────────────────────┐  │
│  │              Docker Compose               │  │
│  │  ┌─────────┐ ┌─────────┐ ┌─────────┐     │  │
│  │  │  Nginx  │ │  Java   │ │  MySQL  │     │  │
│  │  │  :80    │ │  :8080  │ │  :3306  │     │  │
│  │  └─────────┘ └─────────┘ └─────────┘     │  │
│  │  ┌─────────┐                              │  │
│  │  │  Redis  │                              │  │
│  │  │  :6379  │                              │  │
│  │  └─────────┘                              │  │
│  └───────────────────────────────────────────┘  │
└─────────────────────────────────────────────────┘
```

### 7.3 Docker Compose配置

```yaml
version: '3.8'
services:
  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
      - ./frontend/dist:/usr/share/nginx/html
    depends_on:
      - backend

  backend:
    build: ./backend
    ports:
      - "8080:8080"
    environment:
      - SPRING_PROFILES_ACTIVE=prod
      - DB_HOST=mysql
      - REDIS_HOST=redis
    depends_on:
      - mysql
      - redis

  mysql:
    image: mysql:8.0
    ports:
      - "3306:3306"
    environment:
      - MYSQL_ROOT_PASSWORD=${DB_PASSWORD}
      - MYSQL_DATABASE=tricenter_enterprise
    volumes:
      - mysql_data:/var/lib/mysql

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data

volumes:
  mysql_data:
  redis_data:
```

---

## 8. 性能优化建议

### 8.1 数据库优化
- 合理使用索引，避免全表扫描
- 大数据量查询使用分页
- 复杂统计使用缓存

### 8.2 缓存策略
- 企业详情：缓存5分钟
- 漏斗统计：缓存1分钟
- 数据字典：缓存1小时

### 8.3 前端优化
- 路由懒加载
- 组件按需引入
- 图片/资源压缩

---

## 9. 开发规范

### 9.1 代码规范
- 遵循阿里巴巴Java开发手册
- 使用Lombok减少样板代码
- 统一使用SLF4J日志框架

### 9.2 Git分支规范
```
main        # 生产分支
develop     # 开发分支
feature/*   # 功能分支
hotfix/*    # 紧急修复分支
```

### 9.3 提交信息规范
```
feat: 新功能
fix: 修复bug
docs: 文档更新
style: 代码格式调整
refactor: 代码重构
test: 测试相关
chore: 构建/工具相关
```

---

## 10. 项目里程碑

| 阶段 | 内容 | 预计周期 |
|-----|------|---------|
| 第一阶段 | 基础框架搭建 + 企业CRUD | 2周 |
| 第二阶段 | 漏斗管理 + 跟进记录 | 2周 |
| 第三阶段 | 数据统计 + 导入导出 | 2周 |
| 第四阶段 | 权限管理 + 系统设置 | 1周 |
| 第五阶段 | 测试 + 部署上线 | 1周 |

**总计：约8周（2个月）**

---

*文档版本: v1.0*  
*创建日期: 2026-01-26*  
*编制单位: 常州跨境电商三中心*
