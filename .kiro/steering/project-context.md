# é¡¹ç›®èƒŒæ™¯

## é¡¹ç›®åç§°
å¸¸å·è·¨å¢ƒç”µå•†ä¸‰ä¸­å¿ƒ - ä¼ä¸šä¿¡æ¯ç®¡ç†ç³»ç»Ÿï¼ˆTriCenterï¼‰

## é¡¹ç›®ç›®çš„
ç®¡ç†å’Œè·Ÿè¸ªåŒºåŸŸå†…è·¨å¢ƒç”µå•†ç›¸å…³ä¼ä¸šçš„ä¿¡æ¯ã€è½¬åŒ–çŠ¶æ€å’Œè·Ÿè¿›è®°å½•ï¼Œæ”¯æŒä¼ä¸šå­µåŒ–å’ŒæœåŠ¡å·¥ä½œã€‚

## æŠ€æœ¯æ ˆ
- å‰ç«¯ï¼šReact + TypeScript + Ant Design + ECharts
- åç«¯ï¼šJava + Spring Boot 3.2.x + MyBatis-Plus
- æ•°æ®åº“ï¼šMySQL 8.0+ï¼ˆæ•°æ®åº“åï¼štricenterï¼‰
- ç¼“å­˜ï¼šRedis 7.x
- è®¤è¯ï¼šSpring Security + JWT
- APIæ–‡æ¡£ï¼šKnife4j (Swagger)

## æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
1. ç”¨æˆ·è®¤è¯ï¼ˆ4ä¸ªAPIï¼‰
2. åŸºç¡€æ•°æ®/æ•°æ®å­—å…¸ï¼ˆ8ä¸ªAPIï¼‰
3. ä¼ä¸šç®¡ç†ï¼ˆ12ä¸ªAPIï¼‰- æ ¸å¿ƒæ¨¡å—
4. ä¼ä¸šäº§å“ç®¡ç†ï¼ˆ4ä¸ªAPIï¼‰
5. è·Ÿè¿›è®°å½•ï¼ˆ5ä¸ªAPIï¼‰
6. çœ‹æ¿ç»Ÿè®¡ï¼ˆ5ä¸ªAPIï¼‰
7. æ¼æ–—åˆ†æï¼ˆ3ä¸ªAPIï¼‰

## å…³é”®æ–‡æ¡£
- éœ€æ±‚æ–‡æ¡£ï¼š`doc/æ•°æ®åˆ†æç³»ç»Ÿé¡¹ç›®éœ€æ±‚æ–‡æ¡£.md`
- APIè®¾è®¡ï¼š`doc/åç«¯APIæ¨¡å—è®¾è®¡.md`
- æŠ€æœ¯æ¶æ„ï¼š`doc/æŠ€æœ¯æ¶æ„æ–‡æ¡£.md`
- æ•°æ®åº“è®¾è®¡ï¼š`doc/æ•°æ®åº“è®¾è®¡æ–‡æ¡£.md`
- SQLè„šæœ¬ï¼š`doc/sql/` ç›®å½•
- APIæµ‹è¯•è®°å½•ï¼š`doc/test/` ç›®å½•

## ç¯å¢ƒé…ç½®
- å¼€å‘ç¯å¢ƒï¼š`.env` / `application-dev.yml`
- ç”Ÿäº§ç¯å¢ƒï¼š`.env.production` / `application-prod.yml`

## å½“å‰è¿›åº¦
- [x] å‰ç«¯å¼€å‘å®Œæˆ
- [x] å‰ç«¯ç™»å½•é¡µé¢å®Œæˆ
- [x] æ•°æ®åº“è®¾è®¡å®Œæˆ
- [x] SQLè„šæœ¬æ‰§è¡Œå®Œæˆ
- [x] ç¯å¢ƒé…ç½®å®Œæˆ
- [x] åç«¯é¡¹ç›®æ¡†æ¶æ­å»ºå®Œæˆ
- [x] æ¨¡å—1ï¼šç”¨æˆ·è®¤è¯ï¼ˆ4ä¸ªAPIï¼‰âœ… å·²å®Œæˆ
- [x] æ¨¡å—2ï¼šåŸºç¡€æ•°æ®/æ•°æ®å­—å…¸ï¼ˆ8ä¸ªAPIï¼‰âœ… å·²å®Œæˆ
- [x] æ¨¡å—3ï¼šä¼ä¸šç®¡ç†ï¼ˆ11/12ä¸ªAPIï¼‰âœ… åŸºæœ¬å®Œæˆ
  - âœ… 3.1 ä¼ä¸šåˆ—è¡¨ GET /api/enterprises
  - âœ… 3.2 ä¼ä¸šè¯¦æƒ… GET /api/enterprises/:id
  - âœ… 3.3 æ–°å¢ä¼ä¸š POST /api/enterprises
  - âœ… 3.4 ç¼–è¾‘ä¼ä¸š PUT /api/enterprises/:id
  - âœ… 3.5 åˆ é™¤ä¼ä¸š DELETE /api/enterprises/:id
  - âœ… 3.6 å˜æ›´æ¼æ–—é˜¶æ®µ PATCH /api/enterprises/:id/stage
  - âœ… 3.7 æ‰¹é‡å¯¼å…¥ POST /api/enterprises/import
  - âœ… 3.8 å¯¼å‡ºä¼ä¸š GET /api/enterprises/export
  - âœ… 3.9 è·å–å¯¼å…¥æ¨¡æ¿ GET /api/enterprises/template
  - âœ… 3.10 è·å–ä¼ä¸šè·Ÿè¿›è®°å½• GET /api/enterprises/:id/follow-ups
  - âœ… 3.11 æ›´æ–°ä¼ä¸šè”ç³»äºº PUT /api/enterprises/:id/contacts
  - â³ 3.12 ä¼ä¸šæ•°æ®åˆ†æ GET /api/enterprises/analysisï¼ˆå¾…å¼€å‘ï¼‰
- [x] æ¨¡å—4ï¼šä¼ä¸šäº§å“ç®¡ç†ï¼ˆ4ä¸ªAPIï¼‰âœ… å·²å®Œæˆ
  - âœ… 4.1 æ·»åŠ ä¼ä¸šäº§å“ POST /api/enterprises/:id/products
  - âœ… 4.2 æ›´æ–°ä¼ä¸šäº§å“ PUT /api/enterprises/:id/products/:productId
  - âœ… 4.3 åˆ é™¤ä¼ä¸šäº§å“ DELETE /api/enterprises/:id/products/:productId
  - âœ… 4.4 ä¼ä¸šä¸“åˆ©ç®¡ç† POST/PUT/DELETE /api/enterprises/:id/patents
- [x] æ¨¡å—5ï¼šè·Ÿè¿›è®°å½•ï¼ˆ5ä¸ªAPIï¼‰âœ… å·²å®Œæˆ
  - âœ… 5.1 è·Ÿè¿›è®°å½•åˆ—è¡¨ GET /api/follow-ups
  - âœ… 5.2 æ–°å¢è·Ÿè¿›è®°å½• POST /api/follow-ups
  - âœ… 5.3 ç¼–è¾‘è·Ÿè¿›è®°å½• PUT /api/follow-ups/:id
  - âœ… 5.4 åˆ é™¤è·Ÿè¿›è®°å½• DELETE /api/follow-ups/:id
  - âœ… 5.5 è·Ÿè¿›ç»Ÿè®¡ GET /api/follow-ups/stats
  - âœ… é™„åŠ  è·å–ä¼ä¸šè·Ÿè¿›è®°å½• GET /api/enterprises/:id/follow-ups
- [x] æ¨¡å—6ï¼šçœ‹æ¿ç»Ÿè®¡ï¼ˆ5ä¸ªAPIï¼‰âœ… å·²å®Œæˆ
  - âœ… 6.1 ç»Ÿè®¡æ¦‚è§ˆ GET /api/dashboard/overview
  - âœ… 6.2 æ¼æ–—é˜¶æ®µåˆ†å¸ƒ GET /api/dashboard/funnel
  - âœ… 6.3 åŒºåŸŸåˆ†å¸ƒ GET /api/dashboard/districts
  - âœ… 6.4 è¡Œä¸šåˆ†å¸ƒ GET /api/dashboard/industries
  - âœ… 6.5 å¾…è·Ÿè¿›æé†’ GET /api/dashboard/pending-follow-ups
- [x] æ¨¡å—7ï¼šæ¼æ–—åˆ†æï¼ˆ3ä¸ªAPIï¼‰âœ… å·²å®Œæˆï¼ˆæµ‹è¯•é€šè¿‡ 2026-02-03ï¼‰
  - âœ… 7.1 æ¼æ–—æ•°æ® GET /api/funnel/data
  - âœ… 7.2 è½¬åŒ–ç‡æ•°æ® GET /api/funnel/conversion
  - âœ… 7.3 è¶‹åŠ¿æ•°æ® GET /api/funnel/trend
- [x] å‰ç«¯mockæ•°æ®è¿ç§» âœ… å·²å®Œæˆ
  - âœ… Dashboard.tsx - æ”¹ç”¨ dashboardApi
  - âœ… EnterpriseList.tsx - æ”¹ç”¨ enterpriseApi + optionsApi
  - âœ… FollowUpRecords.tsx - æ”¹ç”¨ followUpApi
  - âœ… FunnelAnalysis.tsx - æ”¹ç”¨ dashboardApi.getFunnelStats
  - âœ… EnterpriseDetail.original.tsx - æ”¹ç”¨ enterpriseApi + optionsApi

## å¼€å‘å®Œæˆåº¦
- æ€»APIæ•°ï¼š41ä¸ª
- å·²å®Œæˆï¼š40ä¸ªï¼ˆ97.6%ï¼‰
- å¾…å¼€å‘ï¼š1ä¸ªï¼ˆ3.12 ä¼ä¸šæ•°æ®åˆ†æï¼‰

## å¼€å‘é¡ºåº
æŒ‰ `doc/åç«¯APIæ¨¡å—è®¾è®¡.md` ä¸­çš„"å¼€å‘é¡ºåºå»ºè®®"æ‰§è¡Œ

## åç«¯é¡¹ç›®ç»“æ„
```
backend/
â”œâ”€â”€ pom.xml
â”œâ”€â”€ start.bat
â”œâ”€â”€ README.md
â””â”€â”€ src/main/java/com/tricenter/
    â”œâ”€â”€ TriCenterApplication.java
    â”œâ”€â”€ config/
    â”‚   â”œâ”€â”€ SecurityConfig.java
    â”‚   â”œâ”€â”€ MybatisPlusConfig.java
    â”‚   â”œâ”€â”€ RedisConfig.java
    â”‚   â”œâ”€â”€ SwaggerConfig.java
    â”‚   â””â”€â”€ DataInitializer.java
    â”œâ”€â”€ controller/
    â”‚   â””â”€â”€ AuthController.java
    â”œâ”€â”€ service/
    â”‚   â”œâ”€â”€ AuthService.java
    â”‚   â””â”€â”€ impl/AuthServiceImpl.java
    â”œâ”€â”€ mapper/
    â”‚   â””â”€â”€ UserMapper.java
    â”œâ”€â”€ entity/
    â”‚   â””â”€â”€ User.java
    â”œâ”€â”€ dto/
    â”‚   â”œâ”€â”€ request/
    â”‚   â”‚   â”œâ”€â”€ LoginRequest.java
    â”‚   â”‚   â””â”€â”€ ChangePasswordRequest.java
    â”‚   â””â”€â”€ response/
    â”‚       â”œâ”€â”€ LoginResponse.java
    â”‚       â””â”€â”€ UserResponse.java
    â”œâ”€â”€ security/
    â”‚   â”œâ”€â”€ JwtAuthenticationFilter.java
    â”‚   â””â”€â”€ LoginUser.java
    â”œâ”€â”€ common/
    â”‚   â”œâ”€â”€ result/
    â”‚   â”‚   â”œâ”€â”€ Result.java
    â”‚   â”‚   â””â”€â”€ PageResult.java
    â”‚   â””â”€â”€ exception/
    â”‚       â”œâ”€â”€ BusinessException.java
    â”‚       â””â”€â”€ GlobalExceptionHandler.java
    â””â”€â”€ util/
        â””â”€â”€ JwtUtil.java
```

## å‰ç«¯ç™»å½•ç›¸å…³æ–‡ä»¶
- `frontend/src/pages/Login.tsx` - ç™»å½•é¡µé¢
- `frontend/src/stores/authStore.ts` - è®¤è¯çŠ¶æ€ç®¡ç†
- `frontend/src/components/AuthGuard.tsx` - è·¯ç”±å®ˆå«

## é»˜è®¤è´¦å·
- ç”¨æˆ·åï¼šadmin
- å¯†ç ï¼šadmin123

## å¯åŠ¨æ–¹å¼
- ä¸€é”®å¯åŠ¨ï¼šåŒå‡» `start-all.bat`
- å•ç‹¬å¯åŠ¨åç«¯ï¼š`start-backend.bat` æˆ–åœ¨ backend ç›®å½•æ‰§è¡Œ `mvn spring-boot:run "-Dspring-boot.run.profiles=dev"`
- å•ç‹¬å¯åŠ¨å‰ç«¯ï¼š`start-frontend.bat` æˆ–åœ¨ frontend ç›®å½•æ‰§è¡Œ `npm run dev`

## è®¿é—®åœ°å€
- å‰ç«¯ï¼šhttp://localhost:3000
- åç«¯ï¼šhttp://localhost:8080
- APIæ–‡æ¡£ï¼šhttp://localhost:8080/doc.html

## æ³¨æ„äº‹é¡¹
- æ•°æ®åº“å¯†ç é…ç½®åœ¨ `.env` æ–‡ä»¶ä¸­ï¼ˆDB_PASSWORDï¼‰
- åç«¯ä¼šåœ¨å¯åŠ¨æ—¶è‡ªåŠ¨åˆå§‹åŒ–/æ›´æ–° admin ç”¨æˆ·å¯†ç 
- JWT å¯†é’¥éœ€è¦è‡³å°‘ 512 bitsï¼ˆå·²åœ¨ application-dev.yml ä¸­é…ç½®ï¼‰
- **æ¯æ¬¡æœ‰æ–°è¿›å±•æ—¶å¿…é¡»æ›´æ–°æœ¬ steering æ–‡æ¡£çš„"å½“å‰è¿›åº¦"éƒ¨åˆ†**


## æµ‹è¯•è¦æ±‚

### åŸºæœ¬è¦æ±‚
- æ¯ä¸ªåç«¯APIå¼€å‘å®Œæˆåå¿…é¡»è¿›è¡ŒåŠŸèƒ½æµ‹è¯•
- æµ‹è¯•ç»“æœæŒ‰æ¨¡å—è®°å½•åœ¨ `doc/test/` ç›®å½•ä¸‹å¯¹åº”æ–‡ä»¶
- æµ‹è¯•è„šæœ¬ä½äº `backend/test-api.ps1`

### æµ‹è¯•æ–‡æ¡£è§„èŒƒ
æ¯ä¸ªAPIçš„æµ‹è¯•è®°å½•å¿…é¡»åŒ…å«ï¼š
1. **è®¤è¯è¦æ±‚** - æ ‡æ˜æ˜¯å…¬å¼€(ğŸ”“)ã€éœ€è®¤è¯(ğŸ”’)è¿˜æ˜¯éœ€ç®¡ç†å‘˜(ğŸ”)
2. **å‰ç½®æ¡ä»¶** - è¯´æ˜éœ€è¦å…ˆè°ƒç”¨å“ªäº›APIï¼ˆå¦‚ç™»å½•è·å–Tokenï¼‰
3. **å‰ç½®APIè°ƒç”¨æ­¥éª¤** - è¯¦ç»†åˆ—å‡ºæ¯ä¸€æ­¥çš„å…¥å‚å’Œå‡ºå‚
4. **è¯·æ±‚æ ¼å¼** - å®Œæ•´çš„è¯·æ±‚è·¯å¾„ã€Headerã€Bodyæ ¼å¼
5. **å“åº”æ ¼å¼** - é¢„æœŸçš„å“åº”JSONç»“æ„
6. **æµ‹è¯•ç”¨ä¾‹è¡¨** - åŒ…å«ï¼šæµ‹è¯•åœºæ™¯ã€å‰ç½®æ¡ä»¶ã€è¯·æ±‚å…¥å‚ã€é¢„æœŸå“åº”ã€å®é™…ç»“æœã€çŠ¶æ€

### è¾¹é™…æµ‹è¯•è¦†ç›–
æ¯ä¸ªAPIå¿…é¡»æµ‹è¯•ä»¥ä¸‹è¾¹é™…æƒ…å†µï¼ˆé€‚ç”¨çš„ï¼‰ï¼š
- ç©ºå€¼ï¼ˆç©ºå­—ç¬¦ä¸²ã€nullï¼‰
- è¶…é•¿å€¼ï¼ˆè¶…è¿‡å­—æ®µé•¿åº¦é™åˆ¶ï¼‰
- ç‰¹æ®Šå­—ç¬¦ï¼ˆ<script>ã€SQLå…³é”®å­—ç­‰ï¼‰
- SQLæ³¨å…¥ï¼ˆ' OR '1'='1 ç­‰ï¼‰
- è´Ÿæ•°å’Œé›¶å€¼
- ä¸å­˜åœ¨çš„IDï¼ˆå¦‚99999ï¼‰
- æ— æ•ˆçš„æšä¸¾å€¼
- æ— Tokenè®¿é—®éœ€è®¤è¯API
- æ— æ•ˆ/è¿‡æœŸToken
- æƒé™ä¸è¶³ï¼ˆæ™®é€šç”¨æˆ·è®¿é—®ç®¡ç†å‘˜APIï¼‰

### æµ‹è¯•æµç¨‹
1. å¼€å‘å®ŒæˆAPIåï¼Œå…ˆè¿è¡Œæµ‹è¯•è„šæœ¬éªŒè¯
2. æ›´æ–°æµ‹è¯•æ–‡æ¡£ï¼Œè®°å½•æµ‹è¯•ç»“æœ
3. å¤±è´¥çš„æµ‹è¯•è®°å½•åˆ°"é—®é¢˜è®°å½•"è¡¨
4. ä¿®å¤åé‡æ–°æµ‹è¯•å¹¶æ›´æ–°çŠ¶æ€
